name: Send Daily Email Digest

on:
  schedule:
    # Runs at 2:00 PM CST (20:00 UTC same day)
    # CST is UTC-6, so 2 PM CST = 8 PM UTC (20:00)
    - cron: '0 20 * * *'  # 2:00 PM CST (standard time)
  workflow_dispatch:  # Allow manual trigger for testing

jobs:
  send-digest:
    runs-on: ubuntu-latest
    
    steps:
      - name: Send Email Digest
        run: |
          echo "Sending daily email digest at 2 PM CST..."
          curl -s -X GET "https://fitness-tracker-flame-kappa.vercel.app/api/send-digest"
          echo "Email digest triggered successfully!"
